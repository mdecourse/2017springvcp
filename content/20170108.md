Title: 2017Spring 車輛工程系計算機程式
Date: 2017-01-08 11:00
Category: Course
Tags: syllabus, w1
Slug: 2017spring-ve-cp
Author: yen

為了運行速度, 我們學 C; 為了開發效率, 我們學 Python, 想要同時得到運行速度與開發效率, 我們學習 C + Python! 更具體的說: 在 2017Spring 的計算機程式課程中, 我們學習簡單的 ANSI C 與 Python3.

<!-- PELICAN_END_SUMMARY -->

<!-- 導入 FileSaver 與 filereader -->
<script type="text/javascript" src="./../ace/FileSaver.min.js"></script>
<script type="text/javascript" src="./../ace/filereader.js"></script>

<!-- 導入 Brython 標準程式庫 -->
<!-- <script type="text/javascript" src="https://cdn.rawgit.com/brython-dev/brython/master/www/src/brython_dist.js">
</script> -->

<!-- 為了讓 import script1 可以正確運行, 停留在 Brython 3.2.9 版 -->

<script type="text/javascript" src="https://cdn.rawgit.com/brython-dev/brython/3.2.9/www/src/brython_dist.js">
</script>

<!-- 啟動 Brython -->
<script>
window.onload=function(){
brython(1);
}
</script>

<!-- 以下可利用 Brython 環境執行 Python3 程式 -->
<!-- 假如需要用圖型表示數字, 則利用 canvas 繪圖 -->
<!-- <canvas id="plotarea" width="600" height="400"></canvas> -->

2017 Spring 車輛工程系計算機程式 (五) 18:30-20:00上課日期:

<span style="background-color: #ffff00">w1-2/24</span> - 請每人準備一個隨身碟, <span style="background-color: #55ff55"><a href="http://service.mde.tw/download/?type=files&filename=tiny2017_30MB.7z">下載</a></span>可攜程式系統 (30MB) (或從倉儲中<a href="./../data/tiny2017.7z">下載</a>), 從校園網路<span style="background-color: #55ff55"><a href="http://link.springer.com/book/10.1007/978-1-4842-2385-7">下載 Lean Python.pdf</a></span> (7MB, 100 頁), <span style="background-color: #55ff55"><a href="https://service.mde.tw/download/?type=files&filename=Programming-in-ANSI-C.pdf">下載 Programming in ANSI C.pdf</a></span> (或從倉儲中<a href="./../data/Programming-in-ANSI-C.pdf">下載</a>) (600KB, 258 頁), 了解如何啟動系統, 了解如何關閉系統, 了解如何執行 C 程式, 了解如何執行 Python3 程式, 了解為何要學習 C 與 Python3 程式語言.

<span style="background-color: #ffff00">w2-3/3</span> - ANSI C: Part A Section 1 - C 程式歷史與架構 | Python3: Ch1 Getting Started, 了解 Python 解譯器互動模式, 利用 dir() 列出物件屬性, 基本函式定義, 註解與程式碼縮排

<span style="background-color: #ffff00">w3-3/10</span> - ANSI C: Part A Section 2 - C 常數與變數 | Python3: Ch2 Python Objects, 了解 Python 物件型別與基本用法

<span style="background-color: #ffff00">w4-3/17</span> - 課程內容回顧與練習, 分別利用 C 與 Python3 寫一個華氏與攝氏溫度轉換程式, 並比較兩者的差異.

<span style="background-color: #ffff00">w5-3/24</span> - ANSI C: Part A Section 3 - 變數賦值與表達式 | Python3: Ch3 Program Structure, 了解 Python 程式架構

<span style="background-color: #ffff00">w6-3/31</span>(放假)

<span style="background-color: #ffff00">w7-4/7</span> - 課程內容回顧與練習, 簡單介紹能在瀏覽器中執行的 <a href="https://brython.info/">Brython</a>

<span style="background-color: #ffff00">w8-4/14</span> - ANSI C: Part A Section 4, 5, 6 | Python3: Ch4 - 6, 分組整理出一份漂亮的計算機程式初學者教材?如何整理?如何呈現?從 tiny2017 (30MB) 進展到 mini2017 (2GB)

<span style="background-color: #ffff00">w9-4/21</span> (期中考週) - 課程回顧與期中簡報

<span style="background-color: #ffff00">w10-4/28</span> ANSI C： Part A Section 1-6 再回顧 | Python3: Ch 1-6, 從 C、Python3 到 Brython, 導入 mini2017 之後, 帶出 Github 與 github pages, 我們學到什麼?

<span style="background-color: #ffff00">w11-5/5</span> 檢討分組期中報告與期中簡報, 我們學計算機程式的初衷為了什麼? 利用 Leo Editor、Pelican Blog、Reveal.js 與 Ethercalc 替換 MS Words、PowerPoint 與 Excel?

<span style="background-color: #ffff00">w12-5/12</span> - 是的, 我們確實隱瞞了許多複雜的細節, 了解如何利用 <a href="http://bellard.org/tcc/">Tiny C compiler</a> 編譯自己, 了解如何將 C 程式, 以 Tiny C 編譯為動態程式庫, 然後從 Python3 程式中進行呼叫.

<span style="background-color: #ffff00">w13-5/19</span> - 分組練習, 準備期末專題報告與簡報

<span style="background-color: #ffff00">w14-5/26</span> - 分組練習, 準備期末專題報告與簡報

<span style="background-color: #ffff00">w15-6/2</span> - 分組練習, 準備期末專題報告與簡報

<span style="background-color: #ffff00">w16-6/9</span> - 分組練習, 準備期末專題報告與簡報

<span style="background-color: #ffff00">w17-6/16</span> - 分組練習, 準備期末專題報告與簡報

<span style="background-color: #ffff00">w18-6/23</span> (期末考週), 分組期末簡報

參考書: <a href="http://link.springer.com/book/10.1007/978-3-642-23303-6">Programming for Engineers - A Foundational Approach to Learning C and Matlab</a>

<div id="container1"></div>
<script type="text/python3">
from browser import document, html
container1 = document['container1']
</script>

### 利用伺服器執行 Python3 程式

Jupyterhub: <a href="https://8888.kmol.info:9443">https://8888.kmol.info:9443</a>

### 利用以下的編輯器執行 Python3 程式

在 Firefox 中, 以 Preferences - General - Downloads 選擇"Always ask me where to save files"

在 Chrome 中, 以 Settings - Advanced - Downloads 選擇 Ask where to save each file before downloading

<script src="./../ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="./../ace/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>
<script src="./../ace/mode-python3.js" type="text/javascript" charset="utf-8"></script>
<script src="./../ace/snippets/python.js" type="text/javascript" charset="utf-8"></script>
<!-- 請注意, 這裡使用 Javascript 將 localStorage["py_src"] 中存在近端瀏覽器的程式碼, 由使用者決定存檔名稱-->
<script type="text/javascript">
function doSave(){
    var blob = new Blob([localStorage["py_src"]], {type: "text/plain;charset=utf-8"});
    filename = document.getElementById('filename').value
    saveAs(blob, filename+".py");
}
</script>

<script type="text/python3" id="script1">
import sys
import time
import traceback
import javascript

from browser import document as doc, window, alert

has_ace = True
try:
    editor = window.ace.edit("editor")
    session = editor.getSession()
    session.setMode("ace/mode/python")

    editor.setOptions({
     'enableLiveAutocompletion': True,
     'enableSnippets': True,
     'highlightActiveLine': False,
     'highlightSelectedWord': True
    })
except:
    from browser import html
    editor = html.TEXTAREA(rows=20, cols=70)
    doc["editor"] <= editor
    def get_value(): return editor.value
    def set_value(x):editor.value = x
    editor.getValue = get_value
    editor.setValue = set_value
    has_ace = False

if hasattr(window, 'localStorage'):
    from browser.local_storage import storage
else:
    storage = None

def reset_src():
    if storage is not None and "py_src" in storage:
        editor.setValue(storage["py_src"])
    else:
        editor.setValue('for i in range(10):\n\tprint(i)')
    editor.scrollToRow(0)
    editor.gotoLine(0)

def reset_src_area():
    if storage and "py_src" in storage:
        editor.value = storage["py_src"]
    else:
        editor.value = 'for i in range(10):\n\tprint(i)'

class cOutput:

    def __init__(self,target):
        self.target = doc[target]
    def write(self,data):
        self.target.value += str(data)
        

#if "console" in doc:
sys.stdout = cOutput("console")
sys.stderr = cOutput("console")

def to_str(xx):
    return str(xx)

info = sys.implementation.version
doc['version'].text = 'Brython %s.%s.%s' % (info.major, info.minor, info.micro)

output = ''

def show_console(ev):
    doc["console"].value = output
    doc["console"].cols = 60
    doc["console"].rows = 10

# load a Python script
def load_script(evt):
    _name = evt.target.value + '?foo=%s' % time.time()
    editor.setValue(open(_name).read())

# run a script, in global namespace if in_globals is True
def run(*args):
    global output
    doc["console"].value = ''
    src = editor.getValue()
    if storage is not None:
       storage["py_src"] = src

    t0 = time.perf_counter()
    try:
        #ns = {'__name__':'__main__'}
        ns = {'__name__':'editor'}
        exec(src, ns)
        state = 1
    except Exception as exc:
        traceback.print_exc(file=sys.stderr)
        state = 0
    output = doc["console"].value

    print('<completed in %6.2f ms>' % ((time.perf_counter() - t0) * 1000.0))
    return state

if has_ace:
    reset_src()
else:
    reset_src_area()
    
def clear_console(ev):
    doc["console"].value = ""

doc['run'].bind('click',run)
doc['show_console'].bind('click',show_console)
doc['clear_console'].bind('click',clear_console)
</script>

<div id="version"></div>
<div id="editor" style="width:600px;height:300px;"></div>

<!-- 以下的表單與按鈕與前面的 Javascript doSave 函式以及 FileSaver.min.js 互相配合 -->

<form>
    <label>Filename: <input type="text" id="filename" placeholder="input file name"/>.py</label>
    <input type="submit" value="Save" onclick="doSave();"/>
</form>
<button id="run">Run</button>
<button id="show_console">Output</button>
<button id="clear_console">清除</button>
<div style="width:100%;height:100%;">
<textarea id="console" autocomplete="off"></textarea>
</div>
<div id="common"></div>

<script type="text/python3">
from browser import document as doc
import script1

def ex1(ev):
    script1.editor.setValue('''#ex1 簡單的 for 迴圈範例
    for i in range(10):
        print(i)
    ''')
    script1.editor.scrollToRow(0)
    script1.editor.gotoLine(0)
doc['ex1'].bind('click',ex1)
</script><a id="ex1">ex1</a>-for 迴圈

<script type="text/python3">
from browser import document as doc
import script1

def ex2(ev):
    script1.editor.setValue('''#溫度轉換程式
from browser import document as doc

# 因為此函式與滑鼠互動, 需要 event 當作輸入
def convTemp():
    mystring = ""
    cdegree = input("請輸入攝氏溫度:")
    fdegree = float(cdegree)*9/5 + 32
    output_string = "攝氏 " + str(cdegree) + "度=華氏 " + str(fdegree) + "度" 
    # 利用 print() 將轉換結果送到 console 區
    print(output_string)

#直接呼叫 convTemp() 執行
convTemp()
    ''')
    script1.editor.scrollToRow(0)
    script1.editor.gotoLine(0)
doc['ex2'].bind('click',ex2)
</script><a id="ex2">ex2</a>-溫度換算

<script type="text/python3">
from browser import document
import script1

def get_file(e):
    data = open("./../python_ex/for1.py").read()
    script1.editor.setValue(data)
    script1.editor.scrollToRow(0)
    script1.editor.gotoLine(0)
    
document["get"].bind("click", get_file)
</script>

<script type="text/python3">
from browser import document
import script1

def get_temp1(e):
    data = open("./../python_ex/temp1.py").read()
    script1.editor.setValue(data)
    script1.editor.scrollToRow(0)
    script1.editor.gotoLine(0)
    
document["get_temp1"].bind("click", get_temp1)
</script>

<script type="text/python3">
from browser import document
import script1

def get_ver_and_kw(e):
    data = open("./../python_ex/ver_and_kw.py").read()
    script1.editor.setValue(data)
    script1.editor.scrollToRow(0)
    script1.editor.gotoLine(0)
    
document["get_ver_and_kw"].bind("click", get_ver_and_kw)
</script>

<button id="get">for1.py</button><button id="get_temp1">temp1.py</button><button id="get_ver_and_kw">ver_and_kw.py</button>
